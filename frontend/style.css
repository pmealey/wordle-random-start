body { margin: 20px auto; max-width: 450px; line-height: 1.6; font-size: 18px; color: #444; padding: 0 10px; }
h1, h2, h3 {line-height: 1.2;}
textarea {width: 100%;min-height: 150px;}
a, input, textarea, button { touch-action: manipulation; }
button { border: solid 1px #e0e0e0; padding: 5px; border-radius: 4px; background-color: #EFEFEF; color: #444; cursor: pointer; }
button:hover { background-color: #e0e0e0;}
.help { font-style: italic; padding-left: 5px; padding-right: 5px; white-space: pre-line; }
.menu { position: fixed; top: 0; right: 10px; background: transparent; padding: 5px; z-index: 100; }
.menu button + button { margin-left: 5px; }
.summary, .help {font-size: 0.875rem;}
.input-row, textarea {min-width: 200px;}
.input-row {display: flex; flex-direction: row; align-items: stretch;}
.input-row label, .input-row button {flex: 0 0 auto;}
.input-row label {display: flex; align-items: center;}
.input-row * + input, .input-row * + button {margin-left: 5px;}
.input-row input {flex: 1 1 auto;min-width: 0;}
.hidden {display: none;visibility: hidden;}
.result, .game { padding: 5px; border-radius: 4px; }
.game { border: dotted 2px transparent; }
.game.count-winner { border-color: green; }
.game.count-winner.competitive { border-style: solid; }
.result-wrapper, .leaderboard-wrapper { position: relative; padding: 5px; border-radius: 4px; overflow: hidden; }
.result, .leaderboard { display: flex; flex-flow: column; }
.result div { margin-right: auto; }
.result.copyable div { cursor: pointer; }
.results-area { display: flex; flex-direction: column; gap: 5px; }
.results { display: flex; flex-flow: row wrap; align-items: flex-start; }
.leaderboard { width: 100px; }
.leaderboard-container {
  background-color: #e0e0e0; padding: 5px; border-radius: 4px;
  display: flex; flex-direction: column; align-items: center; width: 170px; margin: auto;
  position: relative;
}
.leaderboard-container.hidden {
  display: none;
  margin: 0;
}
.leaderboard-container.hidden-preserve-space {
  visibility: hidden;
}
.leaderboard-comments { position: absolute; top: 1px; right: 3px; }
.leaderboard-list { display: flex; flex-direction: row; }
.leaderboard-list .crown { padding: 5px; }
.leaderboard-wrapper, .game-header > div { display: flex; flex-direction: row; justify-content: space-between; }
.results-dialog { display: flex; flex-direction: column; }
.results-dialog > div:first-child { flex: 0 0 auto; }
.results-dialog > pre { flex: 1 1 auto; padding: 5px; border: solid 1px #444; border-radius: 4px; }

.dialog-overlay { position: fixed; top: 0; left: 0; background: #0006; height: 100vh; width: 100vw; display: flex; align-items: center; justify-content: flex-start; flex-direction: column; padding-top: 5vh; z-index: 200; }
.dialog { width: 425px; max-width: 90vw; height: 600px; max-height: 70vh; background: white; border-radius: 4px; display: flex; flex-direction: column; pointer-events: initial; }
.dialog h4 { margin: 0; }
.dialog-header, .dialog-footer, .dialog-body { margin: 5px; padding: 5px; }
.dialog-header { flex: 0 0 auto; display: flex; flex-direction: row; justify-content: space-between; border-bottom: 1px solid #444; }
.dialog-footer { flex: 0 0 auto; border-top: 1px solid #444; display: flex; justify-content: flex-end; }
.dialog-footer > * + * { margin-left: 10px; }
.dialog-body { flex: 1 1 100%; overflow-y: auto; }

.winner-border {
  position: absolute; display: block; overflow: hidden;
  top: -150%; left: -100%; z-index: -9; height: 400%; width: 300%;
  background: linear-gradient(to right, #fff 20%, #fff 40%, #ECD08C 50%, #ECD08C 55%, #fff 70%, #fff 100%);
  transform: rotate(-45deg); background-size: 200% auto; animation: shine 3s linear infinite;
}

.group-info-area { display: flex; justify-content: space-between; gap: 4px; }

.settings-summary { display: flex; align-items: center; font-size: 0.875rem; flex: 1; justify-content: space-between; }
.settings-summary-spacer { width: 28px; } /* Matches gear button width for centering */
.settings-summary-content { display: flex; align-items: center; gap: 8px; justify-content: center; }
.setting-summary-item { white-space: nowrap; }
.setting-separator { opacity: 0.5; }
.settings-toggle { border: none; background: transparent; padding: 2px 5px; cursor: pointer; font-size: 0.875rem; width: 28px; }
.settings-toggle:hover { background-color: #0001; border-radius: 4px; }

.settings-card { 
  background-color: #e0e0e0; 
  padding: 10px; 
  border-radius: 4px; 
  margin: 10px auto; 
  width: 170px;
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.3s ease-out;
}
.settings-card.expanded { max-height: 500px; }
.settings-header { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #444; padding-bottom: 5px; margin-bottom: 10px; }
.settings-header h4 { margin: 0; font-size: 0.875rem; }
.settings-header button { border: none; background: transparent; cursor: pointer; font-size: 0.875rem; padding: 0 5px; }
.settings-header button:hover { background-color: #0001; border-radius: 4px; }
.settings-body { display: flex; flex-direction: column; gap: 10px; }
.setting-row { display: flex; flex-direction: column; gap: 5px; }
.setting-label { font-weight: bold; font-size: 0.875rem; }
.setting-controls { display: flex; flex-direction: column; gap: 3px; font-size: 0.875rem; }
.setting-controls label { display: flex; align-items: center; gap: 5px; cursor: pointer; }
.setting-controls input[type="radio"] { cursor: pointer; }
.count-input { width: 30px; padding: 2px; border: 1px solid #999; border-radius: 2px; }

.group-tabs { border-bottom: 1px solid #333; margin-bottom: 18px; margin-top: 18px; padding-left: 8px; padding-right: 8px; display: flex; flex-flow: row; gap: 8px; position: relative; }
.group-tabs.hidden { display: none; margin: 0; }
.group-tabs button { border-top-right-radius: 4px; border-top-left-radius: 4px; border-bottom-left-radius: 0; border-bottom-right-radius: 0; border: 1px solid #333; border-bottom: 1px solid white; }
.group-tabs button.selected { position: relative; bottom: -1px; }

.error { color: red; }

/* Infrastructure notice banner */
.notice-banner {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 12px 15px;
  margin: 10px 0;
  background: linear-gradient(135deg, #fff3cd 0%, #ffeeba 100%);
  border: 1px solid #ffc107;
  border-left: 4px solid #ff9800;
  border-radius: 6px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}
.notice-banner.hidden { display: none; }
.notice-icon { font-size: 1.25rem; flex-shrink: 0; }
.notice-text { flex: 1; font-size: 0.875rem; line-height: 1.4; color: #856404; }
.notice-text strong { color: #664d03; }
.notice-dismiss {
  flex-shrink: 0;
  background: transparent;
  border: none;
  color: #856404;
  cursor: pointer;
  padding: 2px 6px;
  font-size: 1rem;
  border-radius: 4px;
  min-height: auto;
}
.notice-dismiss:hover { background: rgba(0,0,0,0.1); }

@keyframes shine { to { background-position: 200% center; } }

/* Loading states */
.loading-text {
  display: inline-block;
  background: linear-gradient(90deg, #444 25%, #888 50%, #444 75%);
  background-size: 200% 100%;
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  animation: loading-shimmer 1.5s infinite;
}

.results-loading {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  padding: 20px;
  color: #666;
  font-style: italic;
}

.results-loading.hidden {
  display: none;
}

.loading-hidden {
  display: none !important;
}

.loading-spinner {
  width: 20px;
  height: 20px;
  border: 2px solid #e0e0e0;
  border-top-color: #666;
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

@keyframes loading-shimmer {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

/* Mobile-specific touch improvements */
@media (max-width: 768px) {
  button { padding: 8px 12px; min-height: 44px; }
  .group-tabs button { padding: 10px 16px; min-height: 44px; }
  .menu { top: calc(100dvh - 60px); right: 10px; }
}
